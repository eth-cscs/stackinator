{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Schema for Stackinator constraints on Spack Modules modules.yaml",
  "type" : "object",
  "required": ["modules"],
  "properties" : {
    "modules" : {
      "type": "object",
      "properties": {
        "default": {
          "type": "object",
          "default": {"arch_folder": false},
          "properties": {
            "roots": {
              "type": "object",
              "additionalProperties": true,
              "properties": {
                "tcl": {
                  "not": {}
                }
              }
            },
            "arch_folder": {
              "_comment": [
                "Differently from spack, uenv does not support 'arch_folder'.",
                "With `uenv --view modules`, MODULEPATH is set by uenv (metadata provided by envvars.py)",
                "to `/{self.mount}/modules`, differently from spack that, by default, adds to MODULEPATH",
                " all arch_folder paths available on the system (e.g. linux-sles15-neoverse_v2)"
              ],
              "type": "boolean",
              "const": false,
              "default": false
            }
          }
        }
      }
    }
  }
}

